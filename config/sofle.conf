# ==========================================
# CẤU HÌNH KẾT NỐI (ĐÃ TỐI ƯU)
# ==========================================

# 1. Kích hoạt nhập mật mã 6 số (Giống DatZu8104)
CONFIG_ZMK_BLE_PASSKEY_ENTRY=y

# 2. Tăng công suất phát sóng (Bạn đã có - Tốt)
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# 3. Fix lỗi kết nối chậm & rớt mạng (QUAN TRỌNG NHẤT)
# Giúp Windows/Android nhận diện và kết nối lại nhanh hơn
CONFIG_ZMK_BLE_EXPERIMENTAL_CONN=y
CONFIG_ZMK_BLE_EXPERIMENTAL_SEC=y

# 4. Tăng số lượng thiết bị lưu trữ (Mặc định là 5, giữ nguyên hoặc tăng nếu cần)
CONFIG_BT_MAX_CONN=5
CONFIG_BT_MAX_PAIRED=5

# 5. Fix lỗi báo pin ảo trên Windows (Bạn đã có - Tốt)
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# ==========================================
# CÁC CẤU HÌNH KHÁC
# ==========================================

# Khử nhiễu phím
CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=3
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=3

# Encoder
CONFIG_EC11=y
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y

# Màn hình OLED (Đã tối ưu luồng xử lý để chống lag)
CONFIG_ZMK_DISPLAY=y
CONFIG_ZMK_DISPLAY_WORK_QUEUE_DEDICATED=y

# Quản lý năng lượng (Ngủ sau 10p là hợp lý)
CONFIG_ZMK_IDLE_TIMEOUT=120000
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=600000
CONFIG_ZMK_EXT_POWER=y

# ZMK Studio (Tắt Studio Locking để tránh xung đột kết nối)
CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_STUDIO_LOCKING=n
CONFIG_ZMK_STUDIO_LOCK_ON_DISCONNECT=n

# RGB Underglow
CONFIG_ZMK_RGB_UNDERGLOW=y
# ĐÃ XÓA DÒNG GÂY LỖI: CONFIG_WS2812_STRIP=y 
CONFIG_ZMK_RGB_UNDERGLOW_EFF_START=0
CONFIG_ZMK_RGB_UNDERGLOW_BRT_MAX=30
CONFIG_ZMK_RGB_UNDERGLOW_EXT_POWER=n
CONFIG_ZMK_RGB_UNDERGLOW_AUTO_OFF_IDLE=y

# Tối ưu hóa log (Tắt log để chip chạy nhẹ hơn)
CONFIG_ZMK_USB_LOGGING=n
